<div class="summary-container">
    <h2>Vue d'ensemble</h2>

    <div class="stats-grid">
        <div class="card stat-card" *ngFor="let stat of stats">
            <div class="stat-icon">
                {{ stat.icon }}
            </div>
            <div class="stat-info">
                <h3>{{ stat.value }}</h3>
                <p>{{ stat.title }}</p>
            </div>
        </div>
    </div>

    <div class="content-grid">
        <div class="card activity-card">
            <div class="card-header">
                <h3>ActivitÃ© RÃ©cente</h3>
                <button class="btn btn-outline btn-sm" routerLink="/taches">Voir tout</button>
            </div>
            <div class="activity-list">
                <div class="activity-item" *ngFor="let activity of recentActivities">
                    <div class="activity-icon">
                        <span *ngIf="activity.type === 'Candidature'">ðŸ“¤</span>
                        <span *ngIf="activity.type === 'Entretien'">ðŸ“…</span>
                        <span *ngIf="activity.type === 'TÃ¢che'">âœ…</span>
                    </div>
                    <div class="activity-details">
                        <h4>{{ activity.company || activity.title }}</h4>
                        <p>{{ activity.type }} â€¢ {{ activity.date }}</p>
                    </div>
                    <div class="activity-status badge">{{ activity.status }}</div>
                </div>
            </div>
        </div>

        <div class="card chart-card">
            <div class="card-header">
                <h3>Ã‰volution des statuts</h3>
            </div>
            <div class="chart-container">
                <svg viewBox="0 0 400 240" class="chart-svg">
                    <!-- Grid Lines (Optional) -->
                    <line x1="0" y1="50" x2="400" y2="50" stroke="#f0f0f0" stroke-width="1" />
                    <line x1="0" y1="100" x2="400" y2="100" stroke="#f0f0f0" stroke-width="1" />
                    <line x1="0" y1="150" x2="400" y2="150" stroke="#f0f0f0" stroke-width="1" />

                    <!-- Bars -->
                    <g *ngFor="let item of chartData; let i = index">
                        <rect [attr.x]="i * (400 / chartData.length) + (400 / chartData.length - 40) / 2"
                            [attr.y]="200 - (item.value / maxChartValue) * 200" width="40"
                            [attr.height]="(item.value / maxChartValue) * 200" rx="4" class="chart-bar" />
                        <text [attr.x]="i * (400 / chartData.length) + (400 / chartData.length) / 2" y="225"
                            text-anchor="middle" class="chart-label">{{ item.label }}</text>
                        <!-- Value on top of bar -->
                        <text [attr.x]="i * (400 / chartData.length) + (400 / chartData.length) / 2"
                            [attr.y]="200 - (item.value / maxChartValue) * 200 - 5" text-anchor="middle"
                            class="chart-value">{{ item.value }}</text>
                    </g>

                    <!-- Line (Evolution) -->
                    <polyline [attr.points]="polylinePoints" fill="none" class="chart-line" stroke-width="3"
                        stroke-linecap="round" stroke-linejoin="round" />

                    <!-- Line Points -->
                    <g *ngFor="let item of chartData; let i = index">
                        <circle [attr.cx]="i * (400 / chartData.length) + (400 / chartData.length) / 2"
                            [attr.cy]="200 - (item.adjustment / maxChartValue) * 200" r="4" class="chart-point" />
                    </g>
                </svg>
                <div class="chart-legend">
                    <div class="legend-item">
                        <span class="legend-color bar-color"></span>
                        <span>Ce mois-ci</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color line-color"></span>
                        <span>Mois dernier</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>