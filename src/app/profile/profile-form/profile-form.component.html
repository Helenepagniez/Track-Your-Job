<form (ngSubmit)="onSubmit()" #profileForm="ngForm" class="profile-form">
    <div class="form-group">
        <label class="form-label">Prénom</label>
        <input type="text" class="form-control" [(ngModel)]="formData.firstName" name="firstName" required>
    </div>
    <div class="form-group">
        <label class="form-label">Nom</label>
        <input type="text" class="form-control" [(ngModel)]="formData.lastName" name="lastName" required>
    </div>
    <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" class="form-control" [(ngModel)]="formData.email" name="email" required email>
    </div>
    <div class="form-group">
        <label class="form-label">Titre</label>
        <input type="text" class="form-control" [(ngModel)]="formData.title" name="title"
            placeholder="Développeur / Chef de projet">
    </div>
    <div class="form-group">
        <label class="form-label">Localisation</label>
        <input type="text" class="form-control" [(ngModel)]="formData.location" name="location"
            placeholder="Paris / Remote">
    </div>

    <div class="form-group full-width" style="margin-top: 10px;">
        <button type="button" class="btn btn-outline" (click)="togglePasswordChange()" style="width: 100%; display: flex; align-items: center; justify-content: space-between;">
            <span>
                <i class="fa-solid fa-lock" style="margin-right: 8px;"></i>
                {{ showPasswordChange ? 'Annuler le changement de mot de passe' : 'Changer le mot de passe' }}
            </span>
            <i class="fa-solid" [class.fa-chevron-up]="showPasswordChange" [class.fa-chevron-down]="!showPasswordChange"></i>
        </button>
    </div>

    <ng-container *ngIf="showPasswordChange">
        <div class="form-group">
            <label class="form-label">Nouveau mot de passe</label>
            <div class="password-input-container">
                <input [type]="showNewPassword ? 'text' : 'password'" 
                       class="form-control" 
                       [(ngModel)]="newPassword" 
                       name="newPassword" 
                       placeholder="••••••••">
                <button type="button" class="password-toggle" (click)="toggleNewPasswordVisibility()" tabindex="-1" title="Afficher/Masquer le mot de passe">
                    <i class="fa-solid" [class.fa-eye]="!showNewPassword" [class.fa-eye-slash]="showNewPassword"></i>
                </button>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Confirmer le mot de passe</label>
            <div class="password-input-container">
                <input [type]="showConfirmNewPassword ? 'text' : 'password'" 
                       class="form-control" 
                       [(ngModel)]="confirmNewPassword" 
                       name="confirmNewPassword" 
                       placeholder="••••••••">
                <button type="button" class="password-toggle" (click)="toggleConfirmNewPasswordVisibility()" tabindex="-1" title="Afficher/Masquer le mot de passe">
                    <i class="fa-solid" [class.fa-eye]="!showConfirmNewPassword" [class.fa-eye-slash]="showConfirmNewPassword"></i>
                </button>
            </div>
        </div>
    </ng-container>

    <div class="form-actions">
        <button type="button" class="btn btn-outline" (click)="onCancel()"
            title="Annuler les modifications">Annuler</button>
        <button type="submit" class="btn btn-primary" [disabled]="!profileForm.form.valid"
            title="Enregistrer le profil">Enregistrer</button>
    </div>
</form>