<div class="stepper-container">
    <mat-stepper [linear]="true" #stepper>
        <!-- Step 1: Infos Générales -->
        <mat-step [stepControl]="firstFormGroup">
            <form [formGroup]="firstFormGroup">
                <ng-template matStepLabel>Infos Générales</ng-template>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Titre du poste *</label>
                        <input matInput formControlName="title" placeholder="Ex: Développeur Angular" required
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Entreprise *</label>
                        <input matInput formControlName="company" placeholder="Ex: Google" required
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Type de contrat</label>
                        <select formControlName="contractType" class="form-control">
                            <option value="CDI">CDI</option>
                            <option value="CDD">CDD</option>
                            <option value="Freelance">Freelance</option>
                            <option value="Stage">Stage</option>
                            <option value="Alternance">Alternance</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Lieu</label>
                        <input matInput formControlName="location" placeholder="Ex: Paris / Remote"
                            class="form-control">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Salaire</label>
                        <input matInput formControlName="salary" placeholder="Ex: 45k - 55k" class="form-control">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Lien de l'annonce</label>
                        <input matInput formControlName="link" placeholder="https://..." class="form-control">
                    </div>
                </div>

                <div class="stepper-actions">
                    <button mat-button matStepperNext type="button" class="btn btn-primary">Suivant</button>
                </div>
            </form>
        </mat-step>

        <!-- Step 2: Détails -->
        <mat-step [stepControl]="secondFormGroup">
            <form [formGroup]="secondFormGroup">
                <ng-template matStepLabel>Détails</ng-template>

                <div class="form-group">
                    <label class="form-label">Présentation entreprise</label>
                    <textarea matInput formControlName="companyDescription" rows="3" class="form-control"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Missions</label>
                    <textarea matInput formControlName="missions" rows="4" class="form-control"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Profil recherché</label>
                    <textarea matInput formControlName="profile" rows="3" class="form-control"></textarea>
                </div>

                <div class="stepper-actions">
                    <button mat-button matStepperPrevious type="button" class="btn btn-outline">Retour</button>
                    <button mat-button matStepperNext type="button" class="btn btn-primary">Suivant</button>
                </div>
            </form>
        </mat-step>

        <!-- Step 3: Extras -->
        <mat-step [stepControl]="thirdFormGroup">
            <form [formGroup]="thirdFormGroup">
                <ng-template matStepLabel>Extras</ng-template>

                <div class="form-group">
                    <label class="form-label">Avantages</label>
                    <textarea matInput formControlName="benefits" rows="3" class="form-control"
                        placeholder="Tickets resto, mutuelle..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Étapes de recrutement</label>
                    <textarea matInput formControlName="recruitmentProcess" rows="3" class="form-control"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Autres informations</label>
                    <textarea matInput formControlName="others" rows="2" class="form-control"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Statut initial *</label>
                    <select formControlName="status" required class="form-control">
                        <option value="To Apply">À postuler</option>
                        <option value="Applied">En attente</option>
                        <option value="Interview">Entretien</option>
                        <option value="Offer">Offre reçue</option>
                        <option value="Rejected">Refusé</option>
                    </select>
                </div>

                <div class="stepper-actions">
                    <button mat-button matStepperPrevious type="button" class="btn btn-outline">Retour</button>
                    <button mat-button (click)="submit()" type="button" class="btn btn-primary">
                        {{ isEditing() ? 'Mettre à jour' : 'Sauvegarder' }}
                    </button>
                </div>
            </form>
        </mat-step>
    </mat-stepper>
</div>