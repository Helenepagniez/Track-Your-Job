"use strict";(self.webpackChunktrack_your_job=self.webpackChunktrack_your_job||[]).push([[120],{6120:(O,b,m)=>{m.r(b),m.d(b,{CompaniesComponent:()=>o});var t=m(4438),x=m(177),w=m(7062),h=m(9417),y=m(7935);function C(n,p){if(1&n&&(t.j41(0,"span",20),t.EFF(1),t.k0s()),2&n){const a=p.$implicit;t.xc7("background-color",a.background)("color",a.color)("border",a.border),t.R7$(),t.E5c(" ",a.count," offre",a.count>1?"s":""," ",a.label," ")}}function d(n,p){if(1&n){const a=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"div",11),t.EFF(3),t.k0s(),t.j41(4,"div",12)(5,"h3"),t.EFF(6),t.k0s()()(),t.j41(7,"div",13)(8,"div",14)(9,"div",15),t.DNE(10,C,2,9,"span",16),t.k0s()()(),t.j41(11,"div",17)(12,"button",18),t.bIt("click",function(){const c=t.eBV(a).$implicit,r=t.XpG();return t.Njj(r.viewDetails(c))}),t.EFF(13," Voir d\xe9tails "),t.nrm(14,"i",19),t.k0s()()()}if(2&n){const a=p.$implicit,s=t.XpG();t.R7$(3),t.JRh(a.name.charAt(0)),t.R7$(3),t.JRh(a.name),t.R7$(4),t.Y8G("ngForOf",s.getStatusBadges(a))}}function e(n,p){1&n&&(t.j41(0,"div",21)(1,"div",22),t.nrm(2,"i",23),t.k0s(),t.j41(3,"h3"),t.EFF(4,"Aucune entreprise trouv\xe9e"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Modifiez votre recherche ou ajoutez de nouvelles offres."),t.k0s()())}let o=(()=>{class n{offersService=(0,t.WQX)(y.F);router=(0,t.WQX)(w.Ix);searchTerm=(0,t.vPA)("");companies=(0,t.EWP)(()=>{const a=this.offersService.offers(),s=new Map;a.forEach(r=>{if(s.has(r.company)){const l=s.get(r.company);!l.id&&r.companyInfo?.id&&(l.id=r.companyInfo.id)}else s.set(r.company,{id:r.companyInfo?.id,name:r.company,offerCount:0,contacts:[],latestOfferDate:new Date(0),statusCounts:{"To Apply":0,Applied:0,Interview:0,Offer:0,Rejected:0,"To Relaunch":0,"No Response":0}});const i=s.get(r.company);if(i.offerCount++,i.statusCounts[r.status]++,r.companyInfo?.contacts){const l=new Set(i.contacts.map(f=>f.name));r.companyInfo.contacts.forEach(f=>{l.has(f.name)||(i.contacts.push(f),l.add(f.name))})}const u=new Date(r.dateAdded);u>i.latestOfferDate&&(i.latestOfferDate=u)});const c=this.searchTerm().toLowerCase();return Array.from(s.values()).filter(r=>r.name.toLowerCase().includes(c)).sort((r,i)=>i.latestOfferDate.getTime()-r.latestOfferDate.getTime())});statusColors={"To Apply":{color:"#4d5457ff",background:"rgba(99, 110, 114, 0.2)",border:"2px solid #4d5457ff"},Applied:{color:"#0056b3",background:"rgba(0, 87, 179, 0.2)",border:"2px solid #0056b3"},"To Relaunch":{color:"#e67e22",background:"rgba(230, 126, 34, 0.2)",border:"2px solid #e67e22"},"No Response":{color:"#754600ff",background:"rgba(117, 70, 0, 0.2)",border:"2px solid #754600ff"},Interview:{color:"#ffbb00ff",background:"rgba(255, 196, 0, 0.18)",border:"2px solid #ffbb00ff"},Offer:{color:"#00997aff",background:"rgba(3, 211, 169, 0.2)",border:"2px solid #00997aff"},Rejected:{color:"#d63031",background:"rgba(214, 48, 49, 0.2)",border:"2px solid #d63031"}};viewDetails(a){this.router.navigate(a.id?["/entreprises",a.id]:["/entreprises",a.name])}getStatusBreakdown(a){const s={"To Apply":"\xe0 postuler",Applied:"en attente","To Relaunch":"\xe0 relancer","No Response":"sans r\xe9ponse",Interview:" en entretien",Offer:" re\xe7ue",Rejected:"refus\xe9"},c=[];return Object.keys(a.statusCounts).forEach(r=>{const i=a.statusCounts[r];i>0&&c.push(`${i} ${s[r]}`)}),c.join(", ")}getStatusBadges(a){const s={"To Apply":"\xe0 postuler",Applied:"en attente","To Relaunch":"\xe0 relancer","No Response":"sans r\xe9ponse",Interview:"en entretien",Offer:" re\xe7ue",Rejected:"refus\xe9"},c=[];return Object.keys(a.statusCounts).forEach(r=>{const i=a.statusCounts[r];i>0&&c.push({count:i,label:s[r],color:this.statusColors[r].color,background:this.statusColors[r].background,border:this.statusColors[r].border,status:r})}),c}static \u0275fac=function(s){return new(s||n)};static \u0275cmp=t.VBU({type:n,selectors:[["app-companies"]],standalone:!0,features:[t.aNF],decls:12,vars:3,consts:[[1,"page-header"],[1,"header-content"],[1,"filters-bar","glass"],[1,"search-box"],[1,"fa-solid","fa-magnifying-glass"],["type","text","placeholder","Rechercher une entreprise...",1,"search-input",3,"ngModelChange","ngModel"],[1,"companies-grid"],["class","company-card glass hover-effect",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"company-card","glass","hover-effect"],[1,"card-header"],[1,"company-avatar"],[1,"company-info"],[1,"card-body"],[1,"offer-status-container"],[1,"status-badges"],["class","status-badge",3,"background-color","color","border",4,"ngFor","ngForOf"],[1,"card-footer"],["title","Voir les d\xe9tails de l'entreprise",1,"btn","btn-outline","btn-sm",3,"click"],[1,"fa-solid","fa-arrow-right"],[1,"status-badge"],[1,"empty-state"],[1,"empty-icon"],[1,"fa-solid","fa-building"]],template:function(s,c){1&s&&(t.j41(0,"section")(1,"header",0)(2,"div",1)(3,"h1"),t.EFF(4,"Mon R\xe9pertoire des Entreprises"),t.k0s()()(),t.j41(5,"div",2)(6,"div",3),t.nrm(7,"i",4),t.j41(8,"input",5),t.bIt("ngModelChange",function(i){return c.searchTerm.set(i)}),t.k0s()()(),t.j41(9,"div",6),t.DNE(10,d,15,3,"div",7),t.k0s(),t.DNE(11,e,7,0,"div",8),t.k0s()),2&s&&(t.R7$(8),t.Y8G("ngModel",c.searchTerm()),t.R7$(2),t.Y8G("ngForOf",c.companies()),t.R7$(),t.Y8G("ngIf",0===c.companies().length))},dependencies:[x.MD,x.Sq,x.bT,w.iI,h.YN,h.me,h.BC,h.vS],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%}section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;max-width:1000px;gap:30px;width:100%}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font:700 40px Roboto,sans-serif;width:fit-content;letter-spacing:.5px;margin:0}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px;border-radius:var(--radius-md);margin-bottom:10px;box-shadow:var(--shadow-sm);transition:transform .3s ease,box-shadow .3s ease;width:100%}.search-box[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;background-color:var(--background-color);padding:8px 15px;border-radius:var(--radius-sm);box-shadow:var(--shadow-sm)}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font:14px;color:var(--primary-color);width:20px;height:20px;display:flex;align-items:center;justify-content:center}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font:14px Roboto,sans-serif;letter-spacing:.5px}.search-input[_ngcontent-%COMP%]{border:none;background:none;outline:none;width:100%;margin-left:10px;color:var(--text-color)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-color);font:500 14px Roboto,sans-serif;letter-spacing:.5px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:var(--shadow-sm);border:2px solid var(--primary-color)}.companies-grid[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:20px}.company-card[_ngcontent-%COMP%]{min-height:235px;width:320px;border-radius:16px;padding:1.5rem;transition:transform .2s ease,box-shadow .2s ease;box-shadow:var(--shadow-sm)}.company-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg)}.card-header[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.company-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background-color:var(--primary-color);color:var(--surface-color);border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;text-transform:uppercase}.company-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:left}.company-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font:700 19px Roboto,sans-serif;color:var(--primary-color);letter-spacing:.5px;text-wrap:wrap;text-transform:capitalize}.offer-main-info[_ngcontent-%COMP%]{flex:1}.offer-status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.status-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.status-badge[_ngcontent-%COMP%]{padding:8px 10px;border-radius:var(--radius-sm);font:600 14px Roboto,sans-serif;letter-spacing:.3px;white-space:nowrap;transition:transform .2s ease;margin:2px 0}.status-badge[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-body[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:1.5rem}.contacts-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem;text-transform:uppercase;letter-spacing:.5px}.contact-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.contact-avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--background-color);color:var(--text-secondary);display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:600;border:1px solid var(--border-color)}.contact-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}.contact-details[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}.more-contacts[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);padding-left:.5rem}.no-contacts[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:normal;font-size:.9rem}.card-footer[_ngcontent-%COMP%]{border-top:1px solid var(--border-color);padding-top:1rem;display:flex;justify-content:flex-end}.btn-details[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--primary-color);font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:gap .2s ease;font-size:.95rem}.btn-details[_ngcontent-%COMP%]:hover{gap:.75rem;text-decoration:underline}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem;color:var(--text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:30px;color:var(--primary-color);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:5px 0;font:600 15px Roboto,sans-serif;color:var(--primary-color);letter-spacing:.5px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font:500 14px Roboto,sans-serif;letter-spacing:.5px;color:var(--text-secondary)}@media screen and (max-width: 720px){.companies-grid[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;width:100%}.company-card[_ngcontent-%COMP%]{width:100%}}"]})}return n})()},7935:(O,b,m)=>{m.d(b,{F:()=>y});var t=m(4438),x=m(7758),w=m(9879),h=m(8010);let y=(()=>{class C{tasksService;localStorageService;authService;offers=(0,t.vPA)([]);getOffer(e){return this.offers().find(o=>o.id===e)}getStatusLabel(e){return{"To Apply":"\xc0 postuler",Applied:"En attente","To Relaunch":"\xc0 relancer","No Response":"Sans r\xe9ponse",Interview:"Entretien",Offer:"Offre re\xe7ue",Rejected:"Refus\xe9"}[e]||e}getOrCreateCompanyId(e){const n=this.offers().filter(s=>s.company===e).map(s=>s.companyInfo?.id).filter(s=>void 0!==s);if(n.length>0)return n[0];const p=this.offers().map(s=>s.companyInfo?.id).filter(s=>void 0!==s);return(p.length>0?Math.max(...p):0)+1}constructor(e,o,n){this.tasksService=e,this.localStorageService=o,this.authService=n,(0,t.QZP)(()=>{this.authService.currentUser()?(this.loadOffersFromStorage(),this.normalizeCompanyIds(),this.checkAndAutomateOffers()):this.offers.set([])},{allowSignalWrites:!0}),(0,t.QZP)(()=>{const p=this.offers();(0,t.O8t)(()=>this.authService.currentUser())&&this.localStorageService.updateOffers(p)})}loadOffersFromStorage(){const e=this.localStorageService.getOffers();e&&e.length>0&&this.offers.set(e)}normalizeCompanyIds(){this.offers.update(e=>{const o=new Map;return e.forEach(n=>{if(!o.has(n.company)){const p=n.companyInfo?.id;if(p)o.set(n.company,p);else{const a=Math.max(0,...Array.from(o.values()));o.set(n.company,a+1)}}}),e.map(n=>({...n,companyInfo:{...n.companyInfo,id:o.get(n.company)}}))})}checkAndAutomateOffers(){const e=new Date;this.offers.update(p=>p.map(s=>{if("Applied"===s.status){let c=s.dateAdded;if(s.statusHistory&&s.statusHistory.length>0){const i=[...s.statusHistory].reverse().find(u=>"Applied"===u.status);i&&(c=new Date(i.date))}const r=e.getTime()-new Date(c).getTime();if(r>=3024e6){const i=[...s.statusHistory||[],{status:"No Response",date:new Date}];return{...s,status:"No Response",statusHistory:i}}if(r>=12096e5){this.tasksService.addTask({id:Date.now(),title:"\xc0 relancer",dueDate:new Date,completed:!1,status:"a_faire",priority:"haute",relatedOffers:[`${s.title} - ${s.company} - \xc0 relancer`]});const i=[...s.statusHistory||[],{status:"To Relaunch",date:new Date}];return{...s,status:"To Relaunch",statusHistory:i}}}return s}))}addOffer(e){const o=this.getOrCreateCompanyId(e.company),n=this.offers().find(i=>i.company===e.company),p=n?.companyDescription,a=n?.companyInfo,s=[{status:"To Apply",date:e.dateAdded}];"To Apply"!==e.status&&s.push({status:e.status,date:new Date});let c=e.interviews||[];if("Interview"===e.status&&e.interviewDate&&e.interviewType&&!c.some(u=>new Date(u.date).getTime()===new Date(e.interviewDate).getTime()&&u.type===e.interviewType)){const u={date:new Date(e.interviewDate),type:e.interviewType,details:void 0};c=[...c,u];let l=u.type;"Pr\xe9qual"===u.type&&(l="Pr\xe9qualification");const f=this.getStatusLabel(e.status),v=`${e.title} - ${e.company} - ${f}`;this.tasksService.addTask({id:Date.now()+Math.random(),title:l,dueDate:new Date(u.date),completed:!1,status:"a_faire",priority:"haute",relatedOffers:[v]})}const r={...e,statusHistory:s,interviews:c.length>0?c:void 0,companyInfo:{id:o,employees:a?.employees,founded:a?.founded,group:a?.group,contacts:a?.contacts,...e.companyInfo},companyDescription:e.companyDescription||p};this.offers.update(i=>[r,...i].map(l=>l.company===r.company?{...l,companyInfo:{...l.companyInfo,id:o},companyDescription:r.companyDescription||l.companyDescription}:l))}updateOffer(e){const o=this.getOrCreateCompanyId(e.company),n=this.offers().find(v=>v.id===e.id),p=this.offers().find(v=>v.company===e.company),a=p?.companyDescription,s=p?.companyInfo;let c=e.statusHistory||[];const i=e.statusHistory&&e.statusHistory!==(n?.statusHistory||[]);!i&&n&&n.status!==e.status?c=[...n.statusHistory||[],{status:e.status,date:new Date}]:!i&&n&&(c=n.statusHistory||[]);const u=e.interviews&&e.interviews!==n?.interviews;let l=e.interviews||n?.interviews||[];if(!u&&"Interview"===e.status&&e.interviewDate&&e.interviewType&&!l.some(_=>new Date(_.date).getTime()===new Date(e.interviewDate).getTime()&&_.type===e.interviewType)){const _={date:new Date(e.interviewDate),type:e.interviewType,details:void 0};l=[...l,_];let g=_.type;"Pr\xe9qual"===_.type&&(g="Pr\xe9qualification");const M=this.getStatusLabel(e.status),P=`${e.title} - ${e.company} - ${M}`;this.tasksService.addTask({id:Date.now()+Math.random(),title:g,dueDate:new Date(_.date),completed:!1,status:"a_faire",priority:"haute",relatedOffers:[P]})}const f={...e,statusHistory:c,interviews:l.length>0?l:void 0,companyInfo:{employees:s?.employees,founded:s?.founded,group:s?.group,contacts:s?.contacts,...e.companyInfo,id:o},companyDescription:a};this.offers.update(v=>v.map(g=>g.id===f.id?f:g).map(g=>g.company===f.company&&g.id!==f.id?{...g,companyInfo:{...g.companyInfo,id:o}}:g))}deleteOffer(e){this.offers.update(o=>o.filter(n=>n.id!==e))}clearAll(){this.offers.set([])}getCompany(e){let o=[];const n=Number(e);if(o=!isNaN(n)&&n>0?this.offers().filter(s=>s.companyInfo?.id===n):this.offers().filter(s=>s.company===e),0===o.length)return null;const a=[...o].sort((s,c)=>new Date(c.dateAdded).getTime()-new Date(s.dateAdded).getTime())[0];return{name:a.company,info:{...a.companyInfo||{},description:a.companyDescription},offers:o}}updateCompanyDetails(e,o){this.offers.update(n=>n.map(p=>p.company===e?{...p,companyInfo:{...p.companyInfo,...o},companyDescription:void 0!==o.description?o.description:p.companyDescription}:p))}static \u0275fac=function(o){return new(o||C)(t.KVO(x.w),t.KVO(w.s),t.KVO(h.u))};static \u0275prov=t.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()},7758:(O,b,m)=>{m.d(b,{w:()=>h});var t=m(4438),x=m(9879),w=m(8010);let h=(()=>{class y{localStorageService;authService;tasks=(0,t.vPA)([]);constructor(d,e){this.localStorageService=d,this.authService=e,(0,t.QZP)(()=>{this.authService.currentUser()?this.loadTasksFromStorage():this.tasks.set([])},{allowSignalWrites:!0}),(0,t.QZP)(()=>{const o=this.tasks();(0,t.O8t)(()=>this.authService.currentUser())&&this.localStorageService.updateTasks(o)})}loadTasksFromStorage(){const d=this.localStorageService.getTasks();d&&d.length>0&&this.tasks.set(d)}addTask(d){this.tasks.update(e=>[d,...e])}setTasks(d){this.tasks.set(d)}updateTask(d){this.tasks.update(e=>e.map(o=>o.id===d.id?d:o))}deleteTask(d){this.tasks.update(e=>e.filter(o=>o.id!==d))}toggleTask(d){this.tasks.update(e=>e.map(o=>{if(o.id===d){const n=!o.completed;return{...o,completed:n,status:n?"termine":"a_faire"}}return o}))}updateTaskStatus(d,e){this.tasks.update(o=>o.map(n=>n.id===d?{...n,status:e,completed:"termine"===e}:n))}clearAll(){this.tasks.set([])}static \u0275fac=function(e){return new(e||y)(t.KVO(x.s),t.KVO(w.u))};static \u0275prov=t.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()}}]);