"use strict";(self.webpackChunktrack_your_job=self.webpackChunktrack_your_job||[]).push([[120],{6120:(O,b,m)=>{m.r(b),m.d(b,{CompaniesComponent:()=>s});var e=m(4438),x=m(177),w=m(7062),h=m(9417),y=m(7935);function C(n,p){if(1&n&&(e.j41(0,"span",20),e.EFF(1),e.k0s()),2&n){const a=p.$implicit;e.xc7("background-color",a.background)("color",a.color)("border",a.border),e.R7$(),e.E5c(" ",a.count," offre",a.count>1?"s":""," ",a.label," ")}}function d(n,p){if(1&n){const a=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.EFF(3),e.k0s(),e.j41(4,"div",12)(5,"h3"),e.EFF(6),e.k0s()()(),e.j41(7,"div",13)(8,"div",14)(9,"div",15),e.DNE(10,C,2,9,"span",16),e.k0s()()(),e.j41(11,"div",17)(12,"button",18),e.bIt("click",function(){const c=e.eBV(a).$implicit,r=e.XpG();return e.Njj(r.viewDetails(c))}),e.EFF(13," Voir d\xe9tails "),e.nrm(14,"i",19),e.k0s()()()}if(2&n){const a=p.$implicit,o=e.XpG();e.R7$(3),e.JRh(a.name.charAt(0)),e.R7$(3),e.JRh(a.name),e.R7$(4),e.Y8G("ngForOf",o.getStatusBadges(a))}}function t(n,p){1&n&&(e.j41(0,"div",21)(1,"div",22),e.nrm(2,"i",23),e.k0s(),e.j41(3,"h3"),e.EFF(4,"Aucune entreprise trouv\xe9e"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Modifiez votre recherche ou ajoutez de nouvelles offres."),e.k0s()())}let s=(()=>{class n{offersService=(0,e.WQX)(y.F);router=(0,e.WQX)(w.Ix);searchTerm=(0,e.vPA)("");companies=(0,e.EWP)(()=>{const a=this.offersService.offers(),o=new Map;a.forEach(r=>{if(o.has(r.company)){const l=o.get(r.company);!l.id&&r.companyInfo?.id&&(l.id=r.companyInfo.id)}else o.set(r.company,{id:r.companyInfo?.id,name:r.company,offerCount:0,contacts:[],latestOfferDate:new Date(0),statusCounts:{"To Apply":0,Applied:0,Interview:0,Offer:0,Rejected:0,"To Relaunch":0,"No Response":0}});const i=o.get(r.company);if(i.offerCount++,i.statusCounts[r.status]++,r.companyInfo?.contacts){const l=new Set(i.contacts.map(u=>u.name));r.companyInfo.contacts.forEach(u=>{l.has(u.name)||(i.contacts.push(u),l.add(u.name))})}const f=new Date(r.dateAdded);f>i.latestOfferDate&&(i.latestOfferDate=f)});const c=this.searchTerm().toLowerCase();return Array.from(o.values()).filter(r=>r.name.toLowerCase().includes(c)).sort((r,i)=>i.latestOfferDate.getTime()-r.latestOfferDate.getTime())});statusColors={"To Apply":{color:"#4d5457ff",background:"rgba(99, 110, 114, 0.2)",border:"2px solid #4d5457ff"},Applied:{color:"#0056b3",background:"rgba(0, 87, 179, 0.2)",border:"2px solid #0056b3"},"To Relaunch":{color:"#e67e22",background:"rgba(230, 126, 34, 0.2)",border:"2px solid #e67e22"},"No Response":{color:"#754600ff",background:"rgba(117, 70, 0, 0.2)",border:"2px solid #754600ff"},Interview:{color:"#ffbb00ff",background:"rgba(255, 196, 0, 0.18)",border:"2px solid #ffbb00ff"},Offer:{color:"#00997aff",background:"rgba(3, 211, 169, 0.2)",border:"2px solid #00997aff"},Rejected:{color:"#d63031",background:"rgba(214, 48, 49, 0.2)",border:"2px solid #d63031"}};viewDetails(a){this.router.navigate(a.id?["/entreprises",a.id]:["/entreprises",a.name])}getStatusBreakdown(a){const o={"To Apply":"\xe0 postuler",Applied:"en attente","To Relaunch":"\xe0 relancer","No Response":"sans r\xe9ponse",Interview:" en entretien",Offer:" re\xe7ue",Rejected:"refus\xe9"},c=[];return Object.keys(a.statusCounts).forEach(r=>{const i=a.statusCounts[r];i>0&&c.push(`${i} ${o[r]}`)}),c.join(", ")}getStatusBadges(a){const o={"To Apply":"\xe0 postuler",Applied:"en attente","To Relaunch":"\xe0 relancer","No Response":"sans r\xe9ponse",Interview:"en entretien",Offer:" re\xe7ue",Rejected:"refus\xe9"},c=[];return Object.keys(a.statusCounts).forEach(r=>{const i=a.statusCounts[r];i>0&&c.push({count:i,label:o[r],color:this.statusColors[r].color,background:this.statusColors[r].background,border:this.statusColors[r].border,status:r})}),c}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["app-companies"]],standalone:!0,features:[e.aNF],decls:12,vars:3,consts:[[1,"page-header"],[1,"header-content"],[1,"filters-bar","glass"],[1,"search-box"],[1,"fa-solid","fa-magnifying-glass"],["type","text","placeholder","Rechercher une entreprise...",1,"search-input",3,"ngModelChange","ngModel"],[1,"companies-grid"],["class","company-card glass hover-effect",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"company-card","glass","hover-effect"],[1,"card-header"],[1,"company-avatar"],[1,"company-info"],[1,"card-body"],[1,"offer-status-container"],[1,"status-badges"],["class","status-badge",3,"background-color","color","border",4,"ngFor","ngForOf"],[1,"card-footer"],["title","Voir les d\xe9tails de l'entreprise",1,"btn","btn-outline","btn-sm",3,"click"],[1,"fa-solid","fa-arrow-right"],[1,"status-badge"],[1,"empty-state"],[1,"empty-icon"],[1,"fa-solid","fa-building"]],template:function(o,c){1&o&&(e.j41(0,"section")(1,"header",0)(2,"div",1)(3,"h1"),e.EFF(4,"Mon R\xe9pertoire des Entreprises"),e.k0s()()(),e.j41(5,"div",2)(6,"div",3),e.nrm(7,"i",4),e.j41(8,"input",5),e.bIt("ngModelChange",function(i){return c.searchTerm.set(i)}),e.k0s()()(),e.j41(9,"div",6),e.DNE(10,d,15,3,"div",7),e.k0s(),e.DNE(11,t,7,0,"div",8),e.k0s()),2&o&&(e.R7$(8),e.Y8G("ngModel",c.searchTerm()),e.R7$(2),e.Y8G("ngForOf",c.companies()),e.R7$(),e.Y8G("ngIf",0===c.companies().length))},dependencies:[x.MD,x.Sq,x.bT,w.iI,h.YN,h.me,h.BC,h.vS],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:100%}section[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;max-width:1000px;gap:30px;width:100%}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--primary-color);font:700 40px Roboto,sans-serif;width:fit-content;letter-spacing:.5px;margin:0}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px;border-radius:var(--radius-md);margin-bottom:10px;box-shadow:var(--shadow-sm);transition:transform .3s ease,box-shadow .3s ease;width:100%}.search-box[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;background-color:var(--background-color);padding:8px 15px;border-radius:var(--radius-sm);box-shadow:var(--shadow-sm)}.search-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font:14px;color:var(--primary-color);width:20px;height:20px;display:flex;align-items:center;justify-content:center}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font:14px Roboto,sans-serif;letter-spacing:.5px}.search-input[_ngcontent-%COMP%]{border:none;background:none;outline:none;width:100%;margin-left:10px;color:var(--text-color)}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-color);font:500 14px Roboto,sans-serif;letter-spacing:.5px}.search-box[_ngcontent-%COMP%]:focus-within{border-color:var(--primary-color);box-shadow:var(--shadow-sm);border:2px solid var(--primary-color)}.companies-grid[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:20px}.company-card[_ngcontent-%COMP%]{min-height:235px;width:320px;border-radius:16px;padding:1.5rem;transition:transform .2s ease,box-shadow .2s ease;box-shadow:var(--shadow-sm)}.company-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-lg)}.card-header[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.company-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background-color:var(--primary-color);color:var(--surface-color);border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;text-transform:uppercase}.company-info[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:left}.company-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font:700 19px Roboto,sans-serif;color:var(--primary-color);letter-spacing:.5px;text-wrap:wrap;text-transform:capitalize}.offer-main-info[_ngcontent-%COMP%]{flex:1}.offer-status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.status-badges[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.status-badge[_ngcontent-%COMP%]{padding:8px 10px;border-radius:var(--radius-sm);font:600 14px Roboto,sans-serif;letter-spacing:.3px;white-space:nowrap;transition:transform .2s ease;margin:2px 0}.status-badge[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.card-body[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:1.5rem}.contacts-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);margin-bottom:.75rem;text-transform:uppercase;letter-spacing:.5px}.contact-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.contact-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.contact-avatar-small[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--background-color);color:var(--text-secondary);display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:600;border:1px solid var(--border-color)}.contact-details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contact-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}.contact-details[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}.more-contacts[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);padding-left:.5rem}.no-contacts[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:normal;font-size:.9rem}.card-footer[_ngcontent-%COMP%]{border-top:1px solid var(--border-color);padding-top:1rem;display:flex;justify-content:flex-end}.btn-details[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--primary-color);font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:gap .2s ease;font-size:.95rem}.btn-details[_ngcontent-%COMP%]:hover{gap:.75rem;text-decoration:underline}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 1rem;color:var(--text-secondary)}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:30px;color:var(--primary-color);opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:5px 0;font:600 15px Roboto,sans-serif;color:var(--primary-color);letter-spacing:.5px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font:500 14px Roboto,sans-serif;letter-spacing:.5px;color:var(--text-secondary)}@media screen and (max-width: 720px){.companies-grid[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;width:100%}.company-card[_ngcontent-%COMP%]{width:100%}}"]})}return n})()},7935:(O,b,m)=>{m.d(b,{F:()=>y});var e=m(4438),x=m(7758),w=m(9879),h=m(8010);let y=(()=>{class C{tasksService;localStorageService;authService;offers=(0,e.vPA)([]);getOffer(t){return this.offers().find(s=>s.id===t)}getStatusLabel(t){return{"To Apply":"\xc0 postuler",Applied:"En attente","To Relaunch":"\xc0 relancer","No Response":"Sans r\xe9ponse",Interview:"Entretien",Offer:"Offre re\xe7ue",Rejected:"Refus\xe9"}[t]||t}getOrCreateCompanyId(t){const n=this.offers().filter(o=>o.company===t).map(o=>o.companyInfo?.id).filter(o=>void 0!==o);if(n.length>0)return n[0];const p=this.offers().map(o=>o.companyInfo?.id).filter(o=>void 0!==o);return(p.length>0?Math.max(...p):0)+1}constructor(t,s,n){this.tasksService=t,this.localStorageService=s,this.authService=n,this.loadOffersFromStorage(),this.normalizeCompanyIds(),this.checkAndAutomateOffers(),(0,e.QZP)(()=>{const p=this.offers();this.localStorageService.updateOffers(p)})}loadOffersFromStorage(){const t=this.localStorageService.getOffers();t&&t.length>0&&this.offers.set(t)}normalizeCompanyIds(){this.offers.update(t=>{const s=new Map;return t.forEach(n=>{if(!s.has(n.company)){const p=n.companyInfo?.id;if(p)s.set(n.company,p);else{const a=Math.max(0,...Array.from(s.values()));s.set(n.company,a+1)}}}),t.map(n=>({...n,companyInfo:{...n.companyInfo,id:s.get(n.company)}}))})}checkAndAutomateOffers(){const t=new Date;this.offers.update(p=>p.map(o=>{if("Applied"===o.status){let c=o.dateAdded;if(o.statusHistory&&o.statusHistory.length>0){const i=[...o.statusHistory].reverse().find(f=>"Applied"===f.status);i&&(c=new Date(i.date))}const r=t.getTime()-new Date(c).getTime();if(r>=3024e6){const i=[...o.statusHistory||[],{status:"No Response",date:new Date}];return{...o,status:"No Response",statusHistory:i}}if(r>=12096e5){this.tasksService.addTask({id:Date.now(),title:"\xc0 relancer",dueDate:new Date,completed:!1,status:"a_faire",priority:"haute",relatedOffers:[`${o.title} - ${o.company} - \xc0 relancer`]});const i=[...o.statusHistory||[],{status:"To Relaunch",date:new Date}];return{...o,status:"To Relaunch",statusHistory:i}}}return o}))}addOffer(t){const s=this.getOrCreateCompanyId(t.company),n=this.offers().find(i=>i.company===t.company),p=n?.companyDescription,a=n?.companyInfo,o=[{status:"To Apply",date:t.dateAdded}];"To Apply"!==t.status&&o.push({status:t.status,date:new Date});let c=t.interviews||[];if("Interview"===t.status&&t.interviewDate&&t.interviewType&&!c.some(f=>new Date(f.date).getTime()===new Date(t.interviewDate).getTime()&&f.type===t.interviewType)){const f={date:new Date(t.interviewDate),type:t.interviewType,details:void 0};c=[...c,f];let l=f.type;"Pr\xe9qual"===f.type&&(l="Pr\xe9qualification");const u=this.getStatusLabel(t.status),v=`${t.title} - ${t.company} - ${u}`;this.tasksService.addTask({id:Date.now()+Math.random(),title:l,dueDate:new Date(f.date),completed:!1,status:"a_faire",priority:"haute",relatedOffers:[v]})}const r={...t,statusHistory:o,interviews:c.length>0?c:void 0,companyInfo:{id:s,employees:a?.employees,founded:a?.founded,group:a?.group,contacts:a?.contacts,...t.companyInfo},companyDescription:t.companyDescription||p};this.offers.update(i=>[r,...i].map(l=>l.company===r.company?{...l,companyInfo:{...l.companyInfo,id:s},companyDescription:r.companyDescription||l.companyDescription}:l))}updateOffer(t){const s=this.getOrCreateCompanyId(t.company),n=this.offers().find(v=>v.id===t.id),p=this.offers().find(v=>v.company===t.company),a=p?.companyDescription,o=p?.companyInfo;let c=t.statusHistory||[];const i=t.statusHistory&&t.statusHistory!==(n?.statusHistory||[]);!i&&n&&n.status!==t.status?c=[...n.statusHistory||[],{status:t.status,date:new Date}]:!i&&n&&(c=n.statusHistory||[]);const f=t.interviews&&t.interviews!==n?.interviews;let l=t.interviews||n?.interviews||[];if(!f&&"Interview"===t.status&&t.interviewDate&&t.interviewType&&!l.some(_=>new Date(_.date).getTime()===new Date(t.interviewDate).getTime()&&_.type===t.interviewType)){const _={date:new Date(t.interviewDate),type:t.interviewType,details:void 0};l=[...l,_];let g=_.type;"Pr\xe9qual"===_.type&&(g="Pr\xe9qualification");const M=this.getStatusLabel(t.status),D=`${t.title} - ${t.company} - ${M}`;this.tasksService.addTask({id:Date.now()+Math.random(),title:g,dueDate:new Date(_.date),completed:!1,status:"a_faire",priority:"haute",relatedOffers:[D]})}const u={...t,statusHistory:c,interviews:l.length>0?l:void 0,companyInfo:{employees:o?.employees,founded:o?.founded,group:o?.group,contacts:o?.contacts,...t.companyInfo,id:s},companyDescription:a};this.offers.update(v=>v.map(g=>g.id===u.id?u:g).map(g=>g.company===u.company&&g.id!==u.id?{...g,companyInfo:{...g.companyInfo,id:s}}:g))}deleteOffer(t){this.offers.update(s=>s.filter(n=>n.id!==t))}clearAll(){this.offers.set([])}getCompany(t){let s=[];const n=Number(t);if(s=!isNaN(n)&&n>0?this.offers().filter(o=>o.companyInfo?.id===n):this.offers().filter(o=>o.company===t),0===s.length)return null;const a=[...s].sort((o,c)=>new Date(c.dateAdded).getTime()-new Date(o.dateAdded).getTime())[0];return{name:a.company,info:{...a.companyInfo||{},description:a.companyDescription},offers:s}}updateCompanyDetails(t,s){this.offers.update(n=>n.map(p=>p.company===t?{...p,companyInfo:{...p.companyInfo,...s},companyDescription:void 0!==s.description?s.description:p.companyDescription}:p))}static \u0275fac=function(s){return new(s||C)(e.KVO(x.w),e.KVO(w.s),e.KVO(h.u))};static \u0275prov=e.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()},7758:(O,b,m)=>{m.d(b,{w:()=>h});var e=m(4438),x=m(9879),w=m(8010);let h=(()=>{class y{localStorageService;authService;tasks=(0,e.vPA)([]);constructor(d,t){this.localStorageService=d,this.authService=t,this.loadTasksFromStorage(),(0,e.QZP)(()=>{const s=this.tasks();this.localStorageService.updateTasks(s)})}loadTasksFromStorage(){const d=this.localStorageService.getTasks();d&&d.length>0&&this.tasks.set(d)}addTask(d){this.tasks.update(t=>[d,...t])}setTasks(d){this.tasks.set(d)}updateTask(d){this.tasks.update(t=>t.map(s=>s.id===d.id?d:s))}deleteTask(d){this.tasks.update(t=>t.filter(s=>s.id!==d))}toggleTask(d){this.tasks.update(t=>t.map(s=>{if(s.id===d){const n=!s.completed;return{...s,completed:n,status:n?"termine":"a_faire"}}return s}))}updateTaskStatus(d,t){this.tasks.update(s=>s.map(n=>n.id===d?{...n,status:t,completed:"termine"===t}:n))}clearAll(){this.tasks.set([])}static \u0275fac=function(t){return new(t||y)(e.KVO(x.s),e.KVO(w.u))};static \u0275prov=e.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()}}]);